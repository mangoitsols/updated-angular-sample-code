<div class="card club-widget-appointment">
  <!-- <div class="alert alert-danger" id="responseMessage" *ngIf="responseMessage">{{responseMessage}}</div> -->
  <div class="card-header" *ngIf="isClubwall() || isClubNewsRoute()">
    <h5 class="card-title">{{ language.group_news.title }}</h5>
  </div>
  <div class="card-header" *ngIf="isClubDatesRoute()">
    <h5 class="card-title">{{ language.group_news.title_new }}</h5>
  </div>
  <div class="card-body" *ngIf="role != 'guest' && role != 'member_light' && role != 'member_light_admin'">
    <div class="empty-data-image" *ngIf="groupNewsData?.length == 0">
      <img onContextMenu="return false;" src="assets/img/no-news-img.png" alt="{{ language.group_news.no_news }}" loading="lazy" /><br /><span>{{ language.group_news.no_news }}</span>
    </div>
    <div class="club-widget-main" *ngIf="groupNewsData && groupNewsData?.length > 0">
      <div class="club-widget-inner">
        <!-- item start -->
        <div class="row row-cols-2 row-cols-sm-3 row-cols-lg-3 row-cols-xl-5 row-cols-xxl-5">
          <div class="club-widget-item" *ngFor="let data of groupNewsData">
            <div class="col">
              <div class="club-widget-item-inner event-groups">
                <div class="club-time-line">
                  <span class="club-badge"></span>
                </div>
                <div class="club-widget-description">
                  <div class="club-widget-des-inner">
                    <div class="club-left-area" data-bs-toggle="modal" data-bs-target="#exModal1" (click)="getNewsDetails(data.news.id)">
                      <div class="club-w-image">
                        <ng-container *ngIf="data.token">
                          <ng-container *ngIf="!data.token.isLoading && data.token.imageLoaded">
                            <!-- If the image has finished loading, display it -->
                            <img [src]="data.token.url" alt="Image" />
                          </ng-container>
                          <ng-container *ngIf="data.token.isLoading">
                            <!-- If the image is still loading, display a loader -->
                            <img [src]="'../../../../assets/img/loading.gif'" alt="Image" />
                          </ng-container>
                        </ng-container>
                      </div>
                    </div>
                    <div class="club-right-area">
                      <div class="club-box-outer">
                        <div class="club-category" *ngIf="data.group" routerLink="/web/community/group/{{ data.group.id }}/details">
                          {{ data.group.name }}
                        </div>
                        <h5 [innerHTML]="data.news.title" data-bs-toggle="modal" data-bs-target="#exModal1" (click)="getNewsDetails(data.news.id)"></h5>
                        <span class="club-schedule">
                          {{ data.news.publication_date_from | date: 'dd.MM.YYYY' }}
                        </span>
                      </div>

                      <div class="right-group-bottom">
                        <div class="right-group-inner-left">
                          <span class="img">
                            <img onContextMenu="return false;" [src]="data?.news?.user?.member_id | memberPhoto | async" alt="User Photo" loading="lazy" />
                          </span>
                          <span>
                            <div class="small-text">{{ language.club_news.author }}:</div>
                            <div>{{ data?.news?.user?.firstname }} {{ data?.news?.user?.lastname }}</div>
                          </span>
                        </div>
                        <div class="right-group-inner-right" data-bs-toggle="modal" data-bs-target="#exModal1" (click)="getNewsDetails(data.news.id)">
                          {{ language.dashboard.dashboardNewsContent }}
                          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                            <circle cx="11" cy="10" r="7" fill="url(#paint0_linear_2211_916)" />
                            <g filter="url(#filter0_di_2211_916)">
                              <circle cx="11.0002" cy="10" r="6.17647" fill="url(#paint1_linear_2211_916)" />
                            </g>
                            <g filter="url(#filter1_i_2211_916)">
                              <path
                                d="M10.3247 12.0588C10.3223 12.0483 10.3133 12.0499 10.3059 12.0482C9.7822 11.9302 9.59316 11.3575 9.94195 10.9493C10.3193 10.5078 10.6948 10.0645 11.0724 9.62315C11.0965 9.59495 11.0943 9.58017 11.0715 9.55334C10.6931 9.1106 10.3161 8.66649 9.93816 8.22323C9.65744 7.8938 9.72792 7.42493 10.0914 7.20863C10.3647 7.04598 10.7167 7.10529 10.9306 7.35546C11.4419 7.95346 11.9523 8.55249 12.4607 9.15307C12.6845 9.41751 12.684 9.76087 12.46 10.0253C11.9514 10.6257 11.4405 11.2241 10.9301 11.8229C10.8332 11.9364 10.7121 12.0112 10.5651 12.0432C10.5527 12.0459 10.5349 12.0416 10.5277 12.0588C10.4601 12.0588 10.3924 12.0588 10.3247 12.0588Z"
                                fill="#5293F4"
                              />
                            </g>
                            <defs>
                              <filter id="filter0_di_2211_916" x="0.82373" y="0.823532" width="20.353" height="20.3529" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                <feOffset dy="1" />
                                <feGaussianBlur stdDeviation="2" />
                                <feComposite in2="hardAlpha" operator="out" />
                                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.13 0" />
                                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2211_916" />
                                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2211_916" result="shape" />
                                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                <feOffset dy="1" />
                                <feGaussianBlur stdDeviation="0.5" />
                                <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1" />
                                <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0" />
                                <feBlend mode="normal" in2="shape" result="effect2_innerShadow_2211_916" />
                              </filter>
                              <filter id="filter1_i_2211_916" x="9.76465" y="7.11765" width="2.86377" height="5.94118" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape" />
                                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                <feOffset dy="1" />
                                <feGaussianBlur stdDeviation="0.5" />
                                <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1" />
                                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.34 0" />
                                <feBlend mode="normal" in2="shape" result="effect1_innerShadow_2211_916" />
                              </filter>
                              <linearGradient id="paint0_linear_2211_916" x1="11" y1="3" x2="11" y2="17" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#E9E9E9" />
                                <stop offset="1" stop-color="white" />
                              </linearGradient>
                              <linearGradient id="paint1_linear_2211_916" x1="11.0002" y1="3.82353" x2="11.0002" y2="16.1765" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#F3F3F3" />
                                <stop offset="1" stop-color="white" />
                              </linearGradient>
                            </defs>
                          </svg>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- item end -->
        <!-- PAGINATION START -->
        <vc-pagination-bar (pageChanged)="changePage($event)" [defaultItemsPerPage]="10" [itemsPerPageOptions]="[10, 20, 30, 40]" (pageSizeChanged)="changePageSize($event)" [loading]="isLoading" [pagination]="pagination"></vc-pagination-bar>
        <!-- PAGINATION END -->
      </div>
    </div>
  </div>

  <div class="card-body" *ngIf="role == 'guest' || role == 'member_light' || role == 'member_light_admin'">
    <div class="event-content-area">
      <div class="not-available-user">
        <vc-icon color="blue" iconName="feature-locked" size="50px"></vc-icon>
        <h1>{{ language.genral_message.feature_locked }}</h1>
        <span>{{ language.genral_message.not_available_msg }}</span>
      </div>
    </div>
  </div>
  <div class="modal fade change_pass_section news_detail_popup all_news" id="exModal1" tabindex="-1" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h3>{{ language.club_news.groupNewsDetails }}</h3>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
              <path d="M32 3.72111L28.2789 0L16 12.2789L3.72111 0L0 3.72111L12.2789 16L0 28.2789L3.72111 32L16 19.7211L28.2789 32L32 28.2789L19.7211 16L32 3.72111Z" fill="#98A5C6"></path>
            </svg>
          </button>
        </div>
        <div class="modal-body" *ngIf="newsData">
          <div class="n-detail-main">
            <div class="news_details_main">
              <div class="row">
                <div class="col-md-12 news_detail_inner">
                  <div class="card">
                    <div class="card-body">
                      <!-- news details data start -->
                      <div class="news_details" *ngIf="newsData">
                        <div class="">
                          <div class="news_content col-md-12">
                            <div class="news_image">
                              <div class="news_image_container">
                                <ng-container *ngIf="newsData.token">
                                  <ng-container *ngIf="!newsData.token.isLoading && newsData.token.imageLoaded">
                                    <img [src]="newsData.token.url" alt="{{ language.group_news.title }}" loading="lazy" />
                                  </ng-container>
                                  <ng-container *ngIf="newsData.token.isLoading">
                                    <img [src]="'../../../../assets/img/loading.gif'" alt="Image" />
                                  </ng-container>
                                </ng-container>
                                <div class="new-action">
                                  <a class="green" *ngIf="newsData.author == userData.userId || userData.isAdmin" (click)="updateNews(newsData.id)"> {{ language.club_news.Edit }}</a>
                                  <a class="red" *ngIf="newsData.author == userData.userId || userData.isAdmin" (click)="deleteNews(newsData.id)"> {{ language.club_news.Delete }}</a>
                                </div>
                              </div>
                            </div>
                            <!--Remove the tag-->
                            <div class="news-top-content">
                              <span *ngIf="newsData.audience == '0'" class="news-badge">{{ language.create_news.title }}</span>
                              <span *ngIf="newsData.audience == '2'" class="news-badge-group">{{ language.create_news.group_news }}</span>
                              <span *ngIf="newsData.audience == '3'" class="news-badge-chairman">{{ language.create_news.chairman }}</span>
                              <span class="news-date">{{ newsData.created_at | date: 'dd.MM.YYYY' }}</span>
                            </div>
                            <div class="news_heading">
                              <h2>{{ newsData.title }}</h2>
                            </div>
                            <div class="news_content_text" [innerHTML]="newsData.text">
                              ...<a href="#">{{ language.dashboard.dashboardNewsContent }}</a>
                            </div>
                            <hr />
                            <div class="author-info">
                              <div class="author-img">
                                <img onContextMenu="return false;" [src]="newsData?.user?.member_id | memberPhoto | async" alt="User Photo" loading="lazy" />
                              </div>
                              <div class="author-des">
                                <div>
                                  <span class="author-id"> {{ language.club_news.author }}: </span>
                                  <span class="author-id"> {{ newsData.user.firstname }} {{ newsData.user.lastname }} </span>
                                </div>
                                <span class="author-status" *ngIf="newsData.approved_status == 0 && !newsData.deny_by_id">{{ language.theme.status }}:-{{ language.community_groups.waitingApproval }}</span>
                                <span class="author-status" *ngIf="newsData.approved_status == 0 && newsData.deny_by_id">{{ language.theme.status }}:-{{ language.community_groups.admin_deny }}</span>
                                <span class="author-id" *ngIf="newsData.approved_status == 0 && newsData.deny_by_id != null">
                                  {{ language.dashboard.denyBy }}:-
                                  {{ newsData.denybyuser?.firstname }}
                                  {{ newsData.denybyuser?.lastname }}
                                </span>
                                <span class="deny-reason" *ngIf="newsData.approved_status == 0 && newsData.deny_by_id != null">
                                  {{ language.dashboard.denyReason }}:-
                                  {{ newsData.deny_reason }}
                                </span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- news details data End -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
