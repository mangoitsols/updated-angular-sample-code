<div class="community_widget_group">
  <!-- Community top widget start -->
  <div class="row">
    <div class="col-md-12 message_widget">
      <div class="card">
        <div class="chat-navigation">
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item">
              <a class="nav-link" *ngIf="participateAccess.chat == 'Yes'" routerLink="/web/community" (click)="displayMessage('chat')" [ngStyle]="displayChats == true ? { color: '#68759F' } : { color: '#C4CBE0' }">
                {{ language.community_messages.all_active_chat }}
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link per_ic" *ngIf="participateAccess.personal_message == 'Yes'" routerLink="personal-msg" (click)="displayMessage('personal')" [ngStyle]="displayPersonal == true ? { color: '#68759F' } : { color: '#C4CBE0' }">
                {{ language.community_messages.personal_messages }}</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link clu_ic" *ngIf="participateAccess.club_message == 'Yes'" routerLink="club-msg" (click)="displayMessage('club')" [ngStyle]="displayClub == true ? { color: '#68759F' } : { color: '#C4CBE0' }">
                <span *ngIf="headline_word_option == 0">{{ language.community_messages.club_messages_stand }}</span>
                <span *ngIf="headline_word_option == 1">{{ language.community_messages.club_messages_untern }}</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link group_ic" *ngIf="participateAccess.group_message == 'Yes'" routerLink="group-msg" (click)="displayMessage('group')" [ngStyle]="displayGroup == true ? { color: '#68759F' } : { color: '#C4CBE0' }">
                {{ language.community_messages.group_messages }}</a
              >
            </li>
          </ul>
          <!-- Tab panes -->
        </div>
        <div class="card-body" *ngIf="displayChats == true">
          <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
              <div class="tab-content">
                <div class="tab-pane active" id="tabs-1" role="tabpanel">
                  <div class="chat_messager-widget">
                    <div class="chat-sidebar">
                      <div class="chat-search">
                        <form>
                          <div class="input-group no-border">
                            <div class="input-group-append">
                              <div class="input-group-text">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                  <path
                                    d="M8.203 0C8.39541 0.0761099 8.60185 0.074107 8.80228 0.108156C10.7625 0.442639 12.3559 1.39602 13.5685 2.96628C14.5426 4.22811 15.1058 5.77234 15.1439 7.36664C15.184 9.12718 14.6889 10.7075 13.6667 12.0714C13.5525 12.2257 13.5665 12.2998 13.6988 12.432C15.6269 14.3527 15.4926 14.2085 17.4188 16.1313C17.6853 16.3977 17.9459 16.6601 18 17.0827C17.8557 17.6074 17.527 17.9359 16.9497 18C16.5268 17.8678 16.2603 17.5453 15.9696 17.2549C14.0916 15.3742 14.266 15.5685 12.394 13.6838C12.2817 13.5716 12.2176 13.5696 12.0953 13.6617C10.6843 14.7153 9.0909 15.22 7.33714 15.1599C5.46313 15.0958 3.8156 14.4148 2.42662 13.125C1.19398 11.9833 0.376223 10.4511 0.107648 8.79871C-0.209031 6.86191 0.171785 5.04328 1.26613 3.39891C2.37451 1.73451 3.91982 0.660955 5.87601 0.196284C6.17465 0.126182 6.47931 0.0961389 6.77795 0.0420608C6.81402 0.0340492 6.86012 0.0520752 6.87415 0C7.3171 0 7.76005 0 8.203 0ZM1.82132 7.57494C1.80128 10.7355 4.39283 13.3353 7.57165 13.3433C10.7344 13.3513 13.2979 10.7936 13.328 7.60098C13.356 4.44242 10.7865 1.85668 7.58768 1.82263C4.43893 1.79059 1.84136 4.38033 1.82132 7.57494ZM17.9439 17.2449C17.8076 17.5974 17.5691 17.8418 17.2023 17.9479L17.9439 17.2449ZM7.62777 3.33682C7.06055 3.31879 6.63765 3.76143 6.67573 4.32825C6.7098 4.80895 7.09262 5.13942 7.63578 5.15945C8.44151 5.1895 9.08289 5.536 9.55389 6.18694C9.86055 6.60955 9.98682 7.09224 10.0029 7.613C10.0189 8.1037 10.4037 8.47424 10.8787 8.48626C11.3738 8.49827 11.7626 8.15378 11.8047 7.65105C11.8308 7.35262 11.7967 7.05219 11.7346 6.75976C11.3317 4.82497 9.77236 3.47502 7.80214 3.34884C7.74602 3.34683 7.6879 3.33882 7.62777 3.33682Z"
                                    fill="#98A2C3"
                                  />
                                </svg>
                              </div>
                            </div>
                            <input type="text" value="" class="form-control" placeholder="{{ language.community_messages.search }}..." id="myInput" (keyup)="filterArray()" />
                          </div>
                        </form>
                      </div>
                      <!-- user group info -->
                      <!-- chat sidebar widget start -->
                      <div class="chat-panel">
                        <div class="widget-chat widget">
                          <div class="chat-user-list">
                            <div class="chat-list-inner">
                              <!-- chat item start -->
                              <div class="chat-list-item" *ngFor="let chat of filteredArray" id="chat-{{ chat.id }}" (click)="clickChat(chat)" (click)="scrollToBottom()" (click)="menuOpened = true">
                                <ng-container *ngIf="chat?.type == 'group'">
                                  <div class="chat-user-thumb" *ngIf="chat && chat.image">
                                    <img onContextMenu="return false;" alt="" loading="lazy" appDefaultImage [src]="chat.image" />
                                  </div>
                                  <div class="author-img" *ngIf="chat.image == null || chat.image == ''">
                                    <img onContextMenu="return false;" [src]="'assets/img/defaultProfile.jpeg'" style="width: 100px" alt="" loading="lazy" />
                                  </div>
                                </ng-container>
                                <ng-container *ngIf="chat?.type == 'individual'">
                                  <div class="chat-user-thumb">
                                    <img onContextMenu="return false;" [src]="chat?.memebr_id | memberPhoto | async" alt="User Photo" loading="lazy" />
                                  </div>
                                </ng-container>

                                <div class="chat-user-list-content">
                                  <div class="chat-user-name">
                                    <span id="userName">{{ chat.name }} {{ chat.lastName }}</span>
                                    <span class="last-seen" *ngIf="chat.lastMsgDate && !chat.lastMsgTimming"> {{ chat.lastMsgDate | date: 'dd.MM.YYYY' }}</span>
                                    <span class="last-seen" *ngIf="chat.lastMsgTimming"> {{ chat.lastMsgTimming | date: 'HH:mm' }}</span>
                                  </div>
                                  <div class="chat-user-msg">
                                    <span *ngIf="chat.lastMessage && chat.lastMessage.messageType == 'text'">{{ chat.lastMessage.message }}</span>
                                    <span *ngIf="chat.lastMessage && chat.lastMessage.messageType == 'image'">
                                      <img onContextMenu="return false;" alt="" loading="lazy" style="width: 22px" src="../../../../assets/img/doc-icons/image_icon.png" alt="" />
                                    </span>
                                    <span class="message-count" *ngIf="chat.count">{{ chat.count }}</span>
                                  </div>
                                </div>
                              </div>
                              <!-- chat item end -->
                            </div>
                          </div>
                          <!-- user group info inner -->
                        </div>
                        <!-- user group info End-->
                        <div class="chat-bottom-overlay"></div>
                      </div>
                      <!-- <div class="chat-divider"></div> -->
                    </div>
                    <!-- chat sidebar widget end -->
                    <div class="chat-window" [class.menu-open]="menuOpened">
                      <div class="chat-screen" *ngIf="selectedChat">
                        <div class="chat-content">
                          <div class="inner-chat">
                            <div class="chat-header">
                              <div class="chat-header-left">
                                <div class="chat-user-img" *ngIf="selectedChat && selectedChat.image">
                                  <!-- <img onContextMenu="return false;" alt="" loading="lazy" [src]="selectedChat.image ? selectedChat.image : '../../../assets/img/no_image.png'" /> -->
                                  <img onContextMenu="return false;" alt="" loading="lazy" appDefaultImage [src]="selectedChat.image" />
                                </div>
                                <div class="chat-window-header">
                                  <div class="author-img" *ngIf="selectedChat.image == null || selectedChat.image == ''">
                                    <img onContextMenu="return false;" [src]="'assets/img/defaultProfile.jpeg'" style="width: 100px" alt="" loading="lazy" />
                                  </div>
                                  <div class="chat-user-name header-text" *ngIf="selectedChat && selectedChat.type == 'group'">
                                    <span *ngIf="selectedChat">{{ selectedChat.name }}</span
                                    ><br />
                                    <span *ngFor="let member of selectedChat.members; let i = index">
                                      <span *ngIf="member" class="to-username" tooltip="{{ member.username }}" placement="bottom" delay="500">{{ member.firstname }}<span *ngIf="i != selectedChat.members.length - 1">,</span></span>
                                    </span>
                                  </div>
                                  <div class="chat-user-name header-text" *ngIf="selectedChat && selectedChat.type == 'individual'">
                                    <span>
                                      <span class="to-username" tooltip="{{ selectedChat.name }}" placement="bottom" delay="500">{{ selectedChat.name }} {{ selectedChat.lastName }}</span>
                                    </span>
                                  </div>
                                </div>
                              </div>
                              <div class="chat-window-action">
                                <div class="event-action">
                                  <button mat-button [matMenuTriggerFor]="menu">
                                    <img onContextMenu="return false;" alt="" loading="lazy" src="../../../../assets/img/new-design/dashboard/event-action.svg" />
                                  </button>
                                  <mat-menu #menu="matMenu">
                                    <button mat-menu-item (click)="menuOpened = !menuOpened" (click)="getMedia()">{{ language.community_messages.media }}</button>
                                  </mat-menu>
                                </div>
                              </div>
                            </div>
                            <div class="chat-messages" (scroll)="scrolled($event)" #scrollBottom>
                              <ng-container *ngFor="let data of finalMessages; let i = index" class="chat" #item>
                                <div class="row" *ngIf="i == 0 || (data.msg.timestamp | date: 'dd.MM.YYYY') != (finalMessages[i - 1].msg.timestamp | date: 'dd.MM.YYYY')">
                                  <div class="col-lg-12 text-center chat-time">
                                    <div class="date text-center">
                                      {{ data.msg.timestamp | date: 'dd.MM.YYYY' }}
                                    </div>
                                  </div>
                                </div>
                                <div class="row-chat">
                                  <div class="chat-user">
                                    <span class="username" *ngIf="data && data.sender_id == this.userDetails.userId && data.sender && selectedChat.type == 'group'">{{ language.community_messages.you }}</span>
                                    <p *ngIf="data && data.sender_id == this.userDetails.userId" class="chat-grey">
                                      <span class="chat-text" *ngIf="data && data.msg && data.msg.messageType == 'text'">{{ data.msg.message }}</span>
                                      <ng-container *ngIf="data && data.msg && data.msg.messageType == 'image'">
                                        <span *ngIf="data?.msg?.text">{{ data.msg.text.message }}</span
                                        ><br />
                                        <span class="chat-text" *ngIf="isImage(data.msg.message)">
                                          <div class="image-thumbnail">
                                            <img onContextMenu="return false;" alt="" loading="lazy" [src]="data.msg.message" alt="" (click)="previewImage(i, data.msg.message)" />
                                          </div>
                                        </span>
                                        <span class="chat-text" *ngIf="!isImage(data.msg.message)">
                                          <div class="default-folder-image">
                                            <img src="../../../../../../assets/img/doc-icons/chat_doc_ic.png" alt="Default Folder Image" (click)="downloadDoc(data.msg.message)" />{{ getDocFileName(data.msg.message) }}
                                          </div>
                                        </span>
                                      </ng-container>
                                      <span class="time-info">{{ data.msg.timestamp | date: 'HH:mm' }} </span>
                                    </p>
                                  </div>
                                </div>
                                <div class="row-chat">
                                  <div class="chat-sender">
                                    <span class="username" *ngIf="data && data.sender_id != this.userDetails.userId && data.sender && selectedChat.type == 'group'">{{ data.sender.firstname }}</span>
                                    <p *ngIf="data && data.sender_id != this.userDetails.userId" class="chat-blue">
                                      <span class="chat-text" *ngIf="data && data.msg && data.msg.messageType == 'text'">{{ data.msg.message }}</span>
                                      <ng-container *ngIf="data && data.msg && data.msg.messageType == 'image'">
                                        <span *ngIf="data?.msg?.text">{{ data.msg.text.message }}</span
                                        ><br />
                                        <span class="chat-text" *ngIf="isImage(data.msg.message)">
                                          <div class="image-thumbnail">
                                            <img onContextMenu="return false;" alt="" loading="lazy" [src]="data.msg.message" alt="" (click)="previewImage(i, data.msg.message)" />
                                          </div>
                                        </span>
                                        <span class="chat-text" *ngIf="!isImage(data.msg.message)">
                                          <div class="default-folder-image">
                                            <img src="../../../../../../assets/img/doc-icons/chat_doc_ic.png" alt="Default Folder Image" (click)="downloadDoc(data.msg.message)" />
                                            {{ getDocFileName(data.msg.message) }}
                                          </div>
                                        </span>
                                      </ng-container>
                                      <!-- <span class="time-info">{{data.msg.timestamp | date: ' h:mm  a'}} </span> -->
                                      <span class="time-info">{{ data.msg.timestamp | date: 'HH:mm' }} </span>
                                    </p>
                                  </div>
                                </div>
                              </ng-container>
                            </div>
                          </div>
                        </div>
                        <form class="chat-form-wrapper" [formGroup]="chatForm" (ngSubmit)="messageProcess()">
                          <div class="chat-form">
                            <div class="chat-form-inner">
                              <div class="chat-text-area">
                                <div class="input-user-img">
                                  <img onContextMenu="return false;" [src]="userDetails?.member_id | memberPhoto | async" alt="User Photo" loading="lazy" />
                                </div>

                                <!-- <div class="input-user-img" *ngIf="userDetails.image != null && userDetails.image != ''">
                                  <img onContextMenu="return false;" alt="" loading="lazy" [src]="userDetails.image ? userDetails.image : '../../../assets/img/no_image.png'" />
                                </div>
                                <div class="author-img" *ngIf="userDetails.image == null || userDetails.image == ''">
                                  <img onContextMenu="return false;" [src]="'assets/img/defaultProfile.jpeg'" style="width: 100px" alt="" loading="lazy" />
                                </div> -->

                                <input type="text" formControlName="message" name="message" placeholder="{{ language.create_message.compose_replay }}" />
                                <div class="capture-pic">
                                  <button type="button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="19" viewBox="0 0 25 19" fill="none">
                                      <path
                                        d="M4.25223 19C4.11457 18.8841 3.93645 18.9056 3.77791 18.8678C1.57003 18.3396 0.015253 16.4021 0.00677123 14.1337C-0.00171056 11.8392 -0.00301545 9.54475 0.00742367 7.25029C0.0191677 4.56832 2.18855 2.40998 4.87075 2.39696C5.7248 2.39305 6.57885 2.39305 7.43291 2.39956C7.56992 2.40086 7.65604 2.36114 7.73368 2.24781C7.88505 2.02703 8.04751 1.81276 8.21454 1.60305C8.81218 0.852123 9.58859 0.450283 10.5529 0.445073C11.8545 0.437909 13.1562 0.437258 14.4571 0.445073C15.4012 0.450935 16.1672 0.839097 16.7635 1.56788C16.7792 1.58677 16.7929 1.60696 16.8072 1.62649C17.0004 1.87724 17.1446 2.23088 17.399 2.35137C17.673 2.48032 18.0502 2.38849 18.3822 2.39696C19.1782 2.41715 19.9762 2.34941 20.7708 2.44189C22.7791 2.67636 24.5328 4.31953 24.9054 6.31049C24.9295 6.43945 24.9093 6.58208 25 6.6954C25 9.38127 25 12.0665 25 14.7524C24.9087 14.8188 24.9341 14.9269 24.9152 15.0142C24.48 16.9804 23.2925 18.2478 21.3711 18.83C21.1219 18.9056 20.8615 18.9447 20.6064 19C20.4603 19 20.3135 19 20.1673 19C20.0956 18.9199 19.9997 18.9525 19.9142 18.9525C14.9569 18.9512 9.99963 18.9512 5.04235 18.9525C4.95688 18.9525 4.86162 18.9199 4.7892 19C4.61043 19 4.431 19 4.25223 19ZM12.4861 17.0455C15.0163 17.0455 17.5458 17.0494 20.076 17.0442C21.7521 17.041 23.044 15.7488 23.0466 14.077C23.0505 11.8229 23.0505 9.56949 23.0466 7.31542C23.044 5.64033 21.7521 4.3534 20.0773 4.35079C19.0445 4.34884 18.011 4.34819 16.9782 4.3521C16.6011 4.3534 16.3029 4.21403 16.0778 3.90858C15.8129 3.54842 15.5402 3.19412 15.2746 2.83462C15.0561 2.53828 14.7697 2.39435 14.3984 2.39565C13.1372 2.40021 11.8767 2.40087 10.6155 2.39565C10.2345 2.39435 9.94417 2.54219 9.72103 2.84764C9.47245 3.18956 9.20821 3.51976 8.96289 3.86429C8.72083 4.20426 8.40309 4.35731 7.98618 4.3534C6.9775 4.34428 5.96882 4.35014 4.96014 4.35079C3.23833 4.3521 1.95889 5.63186 1.95758 7.35645C1.95628 9.58578 1.95693 11.8151 1.95824 14.0444C1.95824 14.1825 1.95758 14.3225 1.97781 14.458C2.20421 16.0035 3.40536 17.0436 4.96927 17.0449C7.47466 17.0468 9.98071 17.0455 12.4861 17.0455ZM20.1673 19C20.0956 18.9199 19.9997 18.9525 19.9142 18.9525C14.9569 18.9512 9.99963 18.9512 5.04235 18.9525C4.95688 18.9525 4.86162 18.9199 4.7892 19C9.91546 19 15.0411 19 20.1673 19ZM12.5083 5.32641C15.2029 5.32836 17.3892 7.52122 17.3847 10.2182C17.3801 12.908 15.1761 15.1008 12.4854 15.0917C9.80585 15.0826 7.62146 12.8891 7.62081 10.2077C7.62081 7.51341 9.81238 5.32446 12.5083 5.32641ZM12.5128 7.2796C10.8961 7.27634 9.57554 8.58997 9.57358 10.2025C9.57227 11.8138 10.8948 13.1392 12.5044 13.1385C14.1042 13.1379 15.4254 11.8216 15.4312 10.2234C15.4378 8.6069 14.1244 7.28285 12.5128 7.2796ZM20.1086 6.30333C19.5697 6.30724 19.1384 6.7462 19.1423 7.28741C19.1469 7.82276 19.5925 8.26042 20.1275 8.25521C20.6632 8.25 21.0984 7.80518 21.0938 7.26787C21.0892 6.72861 20.6508 6.29942 20.1086 6.30333Z"
                                        fill="#9CACCD"
                                      />
                                    </svg>
                                    <input type="file" (change)="uploadFile($event)" accept="/" />
                                  </button>
                                </div>
                              </div>
                              <div class="chat-btn-group">
                                <div class="chat_sent">
                                  <button type="submit">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="22" viewBox="0 0 26 22" fill="none">
                                      <path
                                        d="M26 11.404C25.8772 11.6456 25.846 11.919 25.7125 12.16C25.3995 12.7275 24.9191 13.0928 24.3224 13.3356C20.1943 15.0144 16.0674 16.6957 11.9399 18.3758C9.17573 19.5014 6.41155 20.6277 3.64674 21.7533C2.3922 22.264 1.20447 21.9731 0.465868 20.9605C0.0230901 20.3536 -0.102872 19.6725 0.0828905 18.9495C0.685348 16.6052 1.29862 14.2634 1.8979 11.9178C1.94306 11.7417 2.03722 11.7511 2.167 11.7511C5.11185 11.7523 8.05606 11.753 11.0009 11.7517C11.5048 11.7517 11.8375 11.4577 11.8438 11.0181C11.8489 10.6204 11.5601 10.3008 11.1549 10.2627C11.0626 10.254 10.9691 10.2577 10.8756 10.2577C7.98163 10.2577 5.08831 10.2552 2.19435 10.2627C1.99459 10.2633 1.92716 10.2059 1.88008 10.0211C1.29926 7.75669 0.709522 5.49477 0.119789 3.23223C-0.208477 1.97048 0.256566 0.851699 1.37496 0.276699C2.09447 -0.0928988 2.82989 -0.0754178 3.57549 0.229251C7.35882 1.77382 11.1441 3.31215 14.9287 4.8536C18.0434 6.12159 21.1562 7.39521 24.2747 8.65634C25.1952 9.02843 25.8009 9.63964 25.965 10.6261C25.9669 10.6379 25.9879 10.646 26 10.6567C26 10.9058 26 11.1549 26 11.404Z"
                                        fill="#6E63EE"
                                      />
                                    </svg>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                      <div class="single-user-panel" *ngIf="selectedChat">
                        <!-- single user header start -->
                        <div class="single-user-header">
                          <div class="author-img">
                            <img onContextMenu="return false;" [src]="userDetails?.member_id | memberPhoto | async" alt="User Photo" loading="lazy" />
                          </div>

                          <!-- <div class="profile-media-img">
                            <img onContextMenu="return false;" alt="" loading="lazy" *ngIf="userDetails.image != null && userDetails.image != ''" [src]="userDetails.image ? userDetails.image : '../../../assets/img/no_image.png'" />
                          </div>
                          <div class="author-img" *ngIf="userDetails.image == null || userDetails.image == ''">
                            <img onContextMenu="return false;" [src]="'assets/img/defaultProfile.jpeg'" style="width: 100px" alt="" loading="lazy" />
                          </div> -->
                          <h2>{{ userDetails?.firstName }} {{ userDetails?.lastName }}</h2>
                          <div class="user-status"></div>
                        </div>
                        <!-- single user header end -->
                        <div class="single-user-media">
                          <div class="media-heading">
                            <h3>{{ language.community_messages.media_link_doc }}</h3>
                            <span class="media-heading-right"
                              >{{ selectedChatMedia.length }}&nbsp;&nbsp;
                              <svg xmlns="http://www.w3.org/2000/svg" width="7" height="14" viewBox="0 0 7 14" fill="none">
                                <path
                                  d="M6.99895 6.70516C6.99895 6.5702 6.99895 6.43524 7 6.30137C6.88454 5.24655 6.46784 4.33532 5.74256 3.58496C4.74438 2.55281 3.7357 1.53254 2.72387 0.516587C2.05106 -0.158195 1.10326 -0.170072 0.473491 0.470162C-0.167824 1.12227 -0.159428 2.12095 0.516525 2.81733C1.45068 3.78038 2.40268 4.72615 3.34209 5.68489C4.1377 6.49678 4.13665 7.5095 3.34209 8.31816C2.39219 9.28553 1.43284 10.2421 0.489235 11.2149C-0.0156298 11.7353 -0.127939 12.4036 0.143911 13.0362C0.406315 13.6473 1.0004 14.0295 1.64801 13.9982C2.05736 13.9788 2.40688 13.8093 2.69763 13.5145C3.73255 12.464 4.77691 11.4222 5.79714 10.3565C6.49618 9.62562 6.88454 8.72519 7 7.70168C7 7.56672 6.99895 7.43176 6.99895 7.29789C6.99895 7.10031 6.99895 6.90273 6.99895 6.70516Z"
                                  fill="#98A2C3"
                                />
                              </svg>
                            </span>
                          </div>
                          <div class="media-image-list">
                            <div class="media-image" *ngFor="let media of selectedChatMedia">
                              <div class="media-img">
                                <span class="chat-text big-one" *ngIf="isImage(media.message)">
                                  <div class="image-thumbnail">
                                    <img onContextMenu="return false;" alt="" loading="lazy" [src]="media.message" alt="" (click)="previewImage(i, media.message)" />
                                  </div>
                                </span>
                                <span class="chat-text" *ngIf="!isImage(media.message)">
                                  <div class="default-folder-image">
                                    <img src="../../../../../../assets/img/doc-icons/chat_doc_ic.png" alt="Default Folder Image" (click)="downloadDoc(media.message)" />
                                    <span>{{ getDocFileName(media.message) }}</span>
                                  </div>
                                </span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="common-group-list" *ngIf="selectdChatCommonGroup.length > 0">
                          <div class="media-heading">
                            <h3>{{ selectdChatCommonGroup.length }} {{ language.community_messages.group_in_common }}</h3>
                          </div>
                          <div class="common-group-list-inner scrollable-div" style="overflow-y: auto; height: 180px" (scroll)="onScroll()">
                            <div class="common-group-item" *ngFor="let commonGroup of selectdChatCommonGroup">
                              <div class="c-group-img">
                                <ng-container *ngIf="commonGroup.token">
                                  <img *ngIf="!commonGroup.token.isLoading && commonGroup.token.imageLoaded" [src]="commonGroup.token.url" alt="Image" appDefaultImage loading="lazy" />
                                  <img *ngIf="commonGroup.token.isLoading" [src]="'../../../../assets/img/loading.gif'" alt="Image" />
                                </ng-container>
                                <!-- <img appDefaultImage [src]="commonGroup.token" alt="Image" alt="" loading="lazy" /> -->
                              </div>
                              <div class="c-content">
                                <span class="c-group-name">{{ commonGroup.name }}</span>
                                <div class="c-group-footer">
                                  <div class="joined-user">
                                    <span class="total-joiny" *ngIf="commonGroup && commonGroup.participantCount">{{ commonGroup.participantCount }} {{ language.community_groups.members }}</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="delete-chat-action">
                          <button type="button" (click)="deleteChat()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
                              <path
                                d="M5.16175 0C6.7134 0 8.25688 0 9.80035 0C9.80852 0.00816655 9.82485 0.0244997 9.83302 0.0244997C10.6987 0.163331 11.2458 0.669658 11.5153 1.48631C11.6297 1.82931 11.597 2.18864 11.5888 2.54797C11.5888 2.67863 11.6052 2.72763 11.7603 2.72763C12.577 2.71946 13.3936 2.71946 14.2021 2.72763C14.2675 2.72763 14.3328 2.72763 14.39 2.7358C14.7575 2.7848 15.0188 3.08696 15.0024 3.43812C14.9861 3.81378 14.6921 4.09144 14.3083 4.09144C14.1123 4.09144 13.9163 4.09961 13.7203 4.09144C13.6223 4.08328 13.5978 4.12411 13.5978 4.21394C13.5733 4.70394 13.5406 5.19393 13.5161 5.67576C13.4508 6.92524 13.3773 8.16655 13.312 9.41604C13.2221 11.0493 13.1241 12.6745 13.0425 14.3078C12.969 15.5001 12.1115 16.3331 10.9028 16.3331C8.63254 16.3331 6.36223 16.3331 4.09193 16.3331C2.88328 16.3331 2.00946 15.4838 1.96046 14.2833C1.91963 13.2543 1.84613 12.2253 1.78896 11.1963C1.71546 9.75087 1.6338 8.30539 1.55213 6.85991C1.50313 5.97792 1.45414 5.08776 1.40514 4.20578C1.39697 4.10778 1.38064 4.07511 1.27447 4.08328C1.07031 4.09144 0.866143 4.09144 0.653813 4.08328C0.229152 4.06694 -0.064844 3.68312 0.0168215 3.26662C0.0821539 2.93179 0.35165 2.71946 0.735478 2.71946C1.42964 2.71946 2.13196 2.71946 2.82612 2.71946C3.01395 2.71946 3.20994 2.7358 3.39777 2.70313C3.39777 2.5153 3.40594 2.33563 3.40594 2.1478C3.40594 2.0988 3.40594 2.04981 3.40594 2.00081C3.44677 1.15965 3.84694 0.555326 4.59826 0.179664C4.77792 0.0979987 4.98209 0.073499 5.16175 0ZM7.48105 2.71946C8.34671 2.71946 9.22053 2.71946 10.0862 2.71946C10.2005 2.71946 10.2332 2.69496 10.225 2.58063C10.2168 2.3928 10.225 2.1968 10.2168 2.00897C10.2005 1.64964 9.93102 1.37198 9.57169 1.37198C8.18338 1.36381 6.80323 1.36381 5.41491 1.37198C5.05559 1.37198 4.78609 1.65781 4.76976 2.00897C4.76159 2.1968 4.77792 2.3928 4.76159 2.58063C4.76159 2.69496 4.79426 2.71946 4.90859 2.71946C5.76608 2.71946 6.62356 2.71946 7.48105 2.71946ZM5.45575 9.53854C5.45575 8.86888 5.45575 8.19922 5.45575 7.52956C5.45575 7.1049 5.16992 6.80274 4.77792 6.80274C4.38593 6.80274 4.09193 7.11307 4.08377 7.52956C4.08377 8.86071 4.08377 10.2 4.08377 11.5312C4.08377 11.9558 4.37776 12.258 4.76976 12.2498C5.16175 12.2498 5.44758 11.9395 5.44758 11.5148C5.45575 10.8615 5.45575 10.2 5.45575 9.53854ZM10.911 9.53854C10.911 8.89338 10.911 8.24005 10.911 7.5949C10.911 7.51323 10.9028 7.43156 10.8947 7.35807C10.8293 7.02324 10.5272 6.78641 10.1923 6.81091C9.84119 6.83541 9.54719 7.11307 9.54719 7.46423C9.53902 8.84438 9.53902 10.2245 9.54719 11.6047C9.54719 11.8497 9.66969 12.0375 9.89019 12.16C10.3557 12.4295 10.911 12.0947 10.911 11.5312C10.911 10.8615 10.911 10.2 10.911 9.53854ZM8.17521 9.53854C8.17521 8.84438 8.18338 8.15839 8.17521 7.46423C8.16704 7.08857 7.86488 6.80274 7.49739 6.80274C7.13806 6.80274 6.82773 7.08857 6.82773 7.45606C6.81956 8.83621 6.82773 10.2164 6.82773 11.5965C6.82773 11.7435 6.87673 11.8742 6.97473 11.9885C7.15439 12.2172 7.44839 12.2988 7.71788 12.209C7.98738 12.1192 8.17521 11.8742 8.18338 11.5883C8.18338 10.9105 8.17521 10.2245 8.17521 9.53854Z"
                                fill="#F46565"
                              />
                            </svg>
                            &nbsp;&nbsp;{{ language.community_messages.delete_chat }}
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="tab-pane" id="tabs-2" role="tabpanel">
                  <p>{{ language.create_message.second_panel }}</p>
                </div>
                <div class="tab-pane" id="tabs-3" role="tabpanel">
                  <p>{{ language.create_message.third_panel }}</p>
                </div>
                <div class="tab-pane" id="tabs-4" role="tabpanel">
                  <p>{{ language.create_message.third_panel }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <app-personal-messages *ngIf="displayPersonal == true"></app-personal-messages>
        <app-club-messages *ngIf="displayClub == true"></app-club-messages>
        <app-group-messages *ngIf="displayGroup == true"></app-group-messages>
      </div>
    </div>
  </div>
  <!-- Community top widget start -->
  <!-- Modal -->
  <div class="modal fade" id="imagePriview" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" (click)="closePreviewImage()" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="image-view">
            <img onContextMenu="return false;" alt="" loading="lazy" [src]="preImage" alt="" />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="selectedImage" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" (click)="unselectImage()" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="image-view">
          <img onContextMenu="return false;" alt="" loading="lazy" class="preview_img" src="" />
          <label class="preview_txt" style="display: none"></label>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="unselectImage()">{{ language.create_event.cancel }}</button>
        <button type="submit" class="btn btn-primary" (click)="messageProcess()">{{ language.profile.submit }}</button>
      </div>
    </div>
  </div>
</div>
<div *ngIf="dowloading">
  <div class="overlay download-overlay">
    <div class="overlay__inner">
      <div class="overlay__content">
        <div class="loading" data-loading-text="Downloading..."></div>
      </div>
    </div>
  </div>
</div>
